{{> nav/nav-block}}

<div class="container">
{{#each recipes}}
    <div class="col s12 m7 margin-top">
        <h2 class="header">{{name}}</h2>
        <div class="card horizontal">
            <div class="card-image">
                <img src="{{mediaLink}}" class="recipe-image">
            </div>
            <div class="card-stacked">
            <div class="card-content">
                <p class="prep">Prep Time: {{prepTime}}</p>
                <p>Cook Time: {{cookTime}}</p>
                <p class="difficulty difficulty{{@index}}">{{difficulty}}</p>
                <p>Serves {{servingSize}} People</p>
            </div>
            </div>
        </div>
    </div>
{{/each}}


<ul class="collection with-header">
    <li class="collection-header"><h4>Ingredients</h4></li>
    {{#each ingredients}}
    <li class="collection-item color"><div>{{quantity}} {{material}}<a href="#!" class="secondary-content"><i class="material-icons">spa</i></a></div></li>
    {{/each}}
</ul>

{{#each recipes}}

    <p class="color" id="instructions">
        {{instructions}}
    </p>

{{/each}}

<ul class="collection with-header append-instructions">
    <li class="collection-header"><h4>Instructions</h4></li>
</ul>

</div>

{{> nav/footer-block}}

<script>
    $(document).ready(function () {
        $('#instructions').hide()
        if ($('.prep')){
            let text = $('#instructions').text().trim().split("|")
            for(let i=0; i < text.length; i++){
                let instruction = $("<li class='collection-item'><span class='title color'>Step " + (i+1) + ": </span><p class='color' id='instructions'>"+text[i]+"</p></li>")
                console.log(text[0])
                $('.append-instructions').append(instruction)
            }          
        }

        let length = $('.difficulty').text()
        for(let i=0; i < length.length; i++){
            let value = $('.difficulty'+i).text()
            $('.difficulty'+i).empty()
            if (value == 1) {
                $('.difficulty'+i).append("Difficulty Rating: <i class='material-icons'>restaurant_menu</i> (Beginner)");
            }
            if (value == 2) {
                $('.difficulty'+i).append("Difficulty Rating: <i class='material-icons'>restaurant_menu</i><i class='material-icons'>restaurant_menu</i> (Amateur)");
            }
            if (value == 3) {
                $('.difficulty'+i).append("Difficulty Rating: <i class='material-icons'>restaurant_menu</i><i class='material-icons'>restaurant_menu</i><i class='material-icons'>restaurant_menu</i> (Home Chef)");
            }
            if (value == 4) {
                $('.difficulty'+i).append("Difficulty Rating: <i class='material-icons'>restaurant_menu</i><i class='material-icons'>restaurant_menu</i><i class='material-icons'>restaurant_menu</i><i class='material-icons'>restaurant_menu</i> (Professional Chef)");
            }
            if (value == 5) {
                $('.difficulty'+i).append("Difficulty Rating: <i class='material-icons'>restaurant_menu</i><i class='material-icons'>restaurant_menu</i><i class='material-icons'>restaurant_menu</i><i class='material-icons'>restaurant_menu</i><i class='material-icons'>restaurant_menu</i> (Michelin Star Chef)");
            }
        }  
    })
</script>